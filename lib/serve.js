const fs=require("fs"),path=require("path"),{doCmd}=require("./utils");async function serve(){const a=path.resolve("./"),b=fs.readdirSync(a);if(0>=b.length)return void console.error("\u5F53\u524D\u6587\u4EF6\u5939\u4E3A\u7A7A");let c=b.filter(a=>-1<a.indexOf("package.json"));if(!c)return void console.error("\u5F53\u524D\u6587\u4EF6\u5939\u4E0D\u5B58\u5728package.json\u6587\u4EF6\uFF0C\u8BF7\u6DFB\u52A0");const d=await doCmd("npm",["install"]);if(0!==d)return void console.error("install error");let e=fs.readFileSync(`${a}/package.json`);const f=JSON.parse(e);let g=f.scripts;return g.dev?void(await doCmd("npm",["run","dev"])):void console.error("\u5F53\u524Dpackage.json\u6587\u4EF6\u4E2D\u4E0D\u5B58\u5728dev\u547D\u4EE4")}module.exports={serve};