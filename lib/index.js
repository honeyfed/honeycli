module.exports=function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=19)}([function(e,t,n){const o=n(22);e.exports={info:function(e){console.log(o.green(e))},error:function(e){"object"==typeof e&&(e=JSON.stringify(e)),console.log(o.red(e))}}},function(e,t,n){const o=n(6),r=n(0),i=n(10),s=n(23),a=n(24),c=n(25);const l=a.promisify(s);e.exports={makeGithubUrlForTbTemplate:function(e){return`https://github.com/honeyfed/template-${e}.git`},loadJson:function(e){const t=o.readFileSync(e,"utf-8");try{return JSON.parse(t)}catch(e){r.error(e)}return null},isValidName:function(e){return/^[a-zA-Z0-9-_]+$/.test(e)},isValidLibName:function(e){return/^[a-z0-9-]+$/.test(e)},doCmd:function(e,t,n={stdio:"inherit"}){return new Promise((o,r)=>{"win32"===process.platform&&0===e.indexOf("npm")&&(e="npm.cmd");const s=i(e,t,n);n.stdio?s.on("close",e=>{o({code:e})}):(s.stdout.on("data",e=>{o({data:e})}),s.stdout.on("close",e=>{o({data:e})}))})},rm:l,readFile:function(e){return o.readFileSync(e,"utf8")},writeFile:function(e,t){o.writeFileSync(e,t,"utf8")},getFiles:function(e){return new Promise(t=>{c(e,(e,n)=>{e?(r.error(e&&e.message),t([])):t(n)})})}}},function(e,t){e.exports=require("path")},function(module,exports,__webpack_require__){const net=__webpack_require__(26),{loadJson:loadJson}=__webpack_require__(1),path=__webpack_require__(2),_=__webpack_require__(4),print=__webpack_require__(0),{defineConfig:defineConfig}=__webpack_require__(7);function loadProjectConfig(){}async function loadTemplates(){try{const e=await net.get("https://raw.githubusercontent.com/honeyfed/config/master/templates.json");return JSON.parse(e)}catch(e){console.error(e)}return null}const defaultConfig={src:"./src",dist:"./dist",entry:"index.js",template:"index.html",static:"",isLib:!1,dev:{port:8080,proxy:[],mock:""}};function loadHoneyConfig(){const e=loadJson("./package.json"),t={};return _.merge(t,defaultConfig),e&&e.honeyConfig?_.merge(t,e.honeyConfig):print.info("no config found"),t.src=path.resolve(process.cwd(),t.src),t.dist=path.resolve(process.cwd(),t.dist),t.static&&(t.static=path.resolve(process.cwd(),t.static)),e.name&&(t.packageName=e.name),t}function translateHoneyConfigToVite(honeyConfig,mode="development"){const config={root:honeyConfig.src,resolve:{alias:{"@":honeyConfig.src}}};if(honeyConfig.static&&(config.publicDir=honeyConfig.static),honeyConfig.isReact){const react=eval(`require('${path.resolve(process.cwd(),"node_modules/@vitejs/plugin-react")}')`);config.plugins=[react()]}else if(honeyConfig.isVue3){const vue=eval(`require('${path.resolve(process.cwd(),"node_modules/@vitejs/plugin-vue")}')`),vueJsx=eval(`require('${path.resolve(process.cwd(),"node_modules/@vitejs/plugin-vue-jsx")}')`);config.plugins=[vue(),vueJsx()]}else{const{createVuePlugin:createVuePlugin}=eval(`require('${path.resolve(process.cwd(),"node_modules/vite-plugin-vue2")}')`);config.plugins=[createVuePlugin()]}if("development"===mode&&(config.server={port:honeyConfig.dev.port},Array.isArray(honeyConfig.dev.proxy)&&honeyConfig.dev.proxy.length>0)){const e=honeyConfig.dev.proxy,t={};e.forEach(e=>{t[e.from]={target:e.to,changeOrigin:!0,cookieDomainRewrite:"localhost"}}),config.server.proxy=t}return"production"===mode&&(config.build={outDir:honeyConfig.dist}),defineConfig(config)}module.exports={loadTemplates:loadTemplates,loadHoneyConfig:loadHoneyConfig,translateHoneyConfigToVite:translateHoneyConfigToVite}},function(e,t){e.exports=require("lodash")},function(e,t,n){const o=n(2);e.exports={getPathInLib:function(e){return o.resolve(__dirname,"../",e)}}},function(e,t){e.exports=require("fs")},function(e,t){e.exports=require("vite")},function(e,t){e.exports=require("webpack")},function(e,t,n){const o=n(2),{writeFile:r,rm:i}=n(1),{vueConfig:s,vue3Config:a,reactConfig:c}=n(40),l=n(4);function u(e){switch(e){case"react":return c;case"vue3":return a;case"vue":default:return s}}e.exports={getEslintConfig:u,getEsLintOptions:function(e=!1){const t=o.resolve(process.cwd(),".eslint.honey.js"),n=e?"react":"vue",i=l.cloneDeep(u(n));return i.extends=function(e){if(Array.isArray(e.extends))return e.extends.map(e=>/^plugin:/.test(String(e))?e:o.resolve(process.cwd(),"./node_modules/"+e));return[]}(i),r(t,"module.exports = "+JSON.stringify(i)),{fix:!1,extensions:[".js",".jsx",".vue"],useEslintrc:!1,errorOnUnmatchedPattern:!0,overrideConfigFile:t,resolvePluginsRelativeTo:process.cwd()}}}},function(e,t){e.exports=require("cross-spawn")},function(e,t,n){n(10);const{GitError:o}=n(12),{doCmd:r}=n(1),i=n(0),s=process.cwd(),a="win32"===process.platform;e.exports={gitClone:async function(e,t=""){const n=await r("git",["clone",e,t,"--depth",1],{stdio:"inherit"});if(0===n.code)return n.code;new o("git clone failed")},isGitRepo:async function(e){try{return 0===(await r("git",["rev-parse","--git-dir"],{cwd:e,stdio:"inherit"})).code}catch(e){return!1}},getStatus:async function(e){const t=await r("git",["status","--short",e||"."],{cwd:s});if(!t||!t.data)return i.info("当前没有需要提交的记录"),"";let n=Buffer.from(t.data);return n=n.toString(),n.trim()?(n=n.split("\n").filter(e=>e.trim()),a&&(n=n.map(e=>e.slice(3))),await async function(e){await r("git",["status","--short",e||"."],{cwd:s,stdio:"inherit"})}(),n):void 0},gitPush:async function(e){return await r("git",["push",e||""],{cwd:s,stdio:"inherit"})},getUnpushedCommits:async function(){const e=await r("git",["cherry","-v"],{cwd:s});if(e.data){return Buffer.from(e.data).toString()}return e.data},gitAdd:async function(e){return await r("git",["add",e],{cwd:s,stdio:"inherit"})}}},function(e,t){class n extends Error{constructor(e){super(e)}}e.exports={GitError:n}},function(e,t){e.exports=require("inquirer")},function(e,t,n){const{loadHoneyConfig:o}=n(3),{getFiles:r,readFile:i,writeFile:s}=n(1),a=n(0),{getPrettierrc:c}=n(15),l=n(32),u=n(2);e.exports={formatCmd:async function(){const e=o();let t=await r(e.src+"/**/*.js");const n=await r(e.src+"/**/*.vue");t=[...t,...n];const p=c();t.forEach(async e=>{a.info(`格式化 ${e}...`);const t=i(e),n=u.extname(e);p.parser=".vue"===n?"vue":"babel";try{const n=l.format(t,p);s(e,(n||"").replaceAll("\r\n","\n"))}catch(e){a.error(e&&e.message)}})}}},function(e,t){e.exports={getPrettierrc:function(){return{printWidth:120,tabWidth:2,useTabs:!1,semi:!0,singleQuote:!0,quoteProps:"as-needed",jsxSingleQuote:!1,trailingComma:"all",bracketSpacing:!0,jsxBracketSameLine:!1,arrowParens:"always",rangeStart:0,rangeEnd:1/0,requirePragma:!1,insertPragma:!1,proseWrap:"preserve",htmlWhitespaceSensitivity:"css",vueIndentScriptAndStyle:!1,endOfLine:"lf"}}}},function(e,t,n){const o=n(2),r=n(8),i=n(34),s=n(35),a=n(36),{generateBasicWebpackConfig:c}=n(17),l=n(0);function u(e){const t=e.dev.proxy,n={};return Array.isArray(t)&&t.length&&t.forEach(t=>{if(t.from&&t.to&&(n[t.from]={target:t.to,changeOrigin:!0,cookieDomainRewrite:"localhost"},e.dev.mock)){const r=o.resolve(process.cwd(),e.dev.mock);delete require.cache[require.resolve(r)];try{const e=require(r);n[t.from].bypass=e}catch(e){l.error(e&&e.message),l.error("mock文件加载错误")}}}),n}e.exports={generateWebpackConfig:function(e,t="production"){const n=c(e,t);return n.output={path:e.appPath?o.resolve(e.dist,a.urlToRelatedDir(e.appPath)):e.dist,filename:"production"===t?"js/[name].[hash:6].js":"js/[name].js",publicPath:e.appPath?a.fixUrlSuffix(e.appPath):"/"},e.isQianKun&&(n.output.library=e.umdName,n.output.libraryTarget="umd",n.output.jsonpFunction=e.jsonpFunction?e.jsonpFunction:null),n.optimization={splitChunks:{chunks:"all"}},n.devServer={port:e.port,hot:!0,publicPath:e.appPath?a.fixUrlSuffix(e.appPath):"/",historyApiFallback:{rewrites:[{from:/.*/,to:a.fixUrlSuffix(e.appPath||"/")+"index.html"}]},proxy:u(e),headers:e.headers?e.headers:{}},e.client&&e.client.webSocketURL&&(n.devServer.sockPort=e.client.webSocketURL.port||8080,n.devServer.sockHost=e.client.webSocketURL.hostname||void 0,n.devServer.sockPath=e.client.webSocketURL.pathname||void 0),n.plugins.push(new i({template:o.resolve(e.src,e.template)})),e.static&&n.plugins.push(new s({patterns:[{from:e.static,to:e.dist}]})),e.appPath&&n.plugins.push(new r.DefinePlugin({APPPATH:JSON.stringify(e.appPath)})),n}}},function(e,t,n){const o=n(2),{VueLoaderPlugin:r}=n(37),i=n(38),s=n(39),{getEsLintOptions:a}=n(9),{getPathInLib:c}=n(5),{browserslistrc:l}=n(41);e.exports={generateBasicWebpackConfig:function(e,t="production"){const n={loader:"postcss-loader",options:{postcssOptions:{plugins:[require("postcss-preset-env")({browsers:l})]}}};return e.rem&&n.options.postcssOptions.plugins.push(require("postcss-pxtorem")({rootValue:100,unitPrecision:8,propList:["*"]})),{mode:t,entry:o.resolve(e.src,e.entry),resolve:{extensions:[".js",".jsx",".vue",".json"],alias:{"@":e.src}},resolveLoader:{modules:[c("./node_modules")]},module:{rules:[{test:/\.jsx?$/,loader:"babel-loader",options:{cwd:c("./"),presets:[["@babel/preset-env",{useBuiltIns:"usage",corejs:3,targets:l}],"@babel/preset-react"]},exclude:/node_modules/},{test:/\.vue$/,loader:"vue-loader"},{test:/\.css$/,use:["style-loader","css-loader",n]},{test:/\.less$/,use:["style-loader","css-loader",n,"less-loader"]},{test:/\.(ttf|woff|eot)$/,use:[{loader:"url-loader",options:{name:"production"===t?"fonts/[name]-[hash:6].[ext]":"fonts/[name].[ext]",limit:8092,esModule:!1}}]},{test:/\.(gif|png|jpg|jpeg|svg)$/,use:[{loader:"url-loader",options:{name:"production"===t?"imgs/[name]-[hash:6].[ext]":"imgs/[name].[ext]",limit:8092,esModule:!1}}]}]},devtool:"production"===t?"none":"eval-source-map",plugins:[new r,new i,new s(a(e.isReact))],externals:e.externals||{}}}}},function(e,t,n){const{CdnUploader:o}=n(43),{loadHoneyConfig:r}=n(3),{getFiles:i}=n(1),s=n(0),a=n(2);function c(e,t,n){return a.join(e,a.relative(t,n)).replaceAll("\\","/")}e.exports={cdnCmd:async function(){const e=new o;if(!e.init())return void s.error("cos初始化失败");const t=r(),n=t.dist;let a=await i(n+"/js/**/*.js"),l=await i(n+"/style/**/*.css"),u=await i(n+"/imgs/**/*"),p=await i(n+"/fonts/**/*");a=a.map(e=>({cdnPath:c(t.packageName,t.dist,e),filePath:e})),l=l.map(e=>({cdnPath:c(t.packageName,t.dist,e),filePath:e})),u=u.map(e=>({cdnPath:c(t.packageName,t.dist,e),filePath:e})),p=p.map(e=>({cdnPath:c(t.packageName,t.dist,e),filePath:e})),a.forEach(async t=>{try{await e.uploadFile(t.cdnPath,t.filePath),s.info("已上传"+t.filePath)}catch(e){s.error(e),s.error(t.filePath+"上传失败")}}),l.forEach(async t=>{try{await e.uploadFile(t.cdnPath,t.filePath),s.info("已上传"+t.filePath)}catch(e){s.error(e),s.error(t.filePath+"上传失败")}}),u.forEach(async t=>{try{await e.uploadFile(t.cdnPath,t.filePath),s.info("已上传"+t.filePath)}catch(e){s.error(e),s.error(t.filePath+"上传失败")}}),p.forEach(async t=>{try{await e.uploadFile(t.cdnPath,t.filePath),s.info("已上传"+t.filePath)}catch(e){s.error(e),s.error(t.filePath+"上传失败")}})}}},function(e,t,n){const o=n(20),{newCmd:r}=n(21),{gitCommit:i,gitPushCmd:s,generateChangeLog:a}=n(29),{buildCmd:c}=n(33),{devCmd:l}=n(45),{formatCmd:u}=n(14),{lintCmd:p}=n(48),{cdnCmd:d}=n(18),{upgradeCmd:f}=n(50),m=n(0),{loadJson:g}=n(1),{getPathInLib:h}=n(5);e.exports={main:function(){const e=g(h("./package.json"));m.info("honey cli v"+e.version),o.version(e.version).command("new").alias("n").description("创建新的项目").action(r),o.command("commit").alias("c").description("提交代码").action(e=>{i()}),o.command("push").alias("p").description("推送代码").action(e=>{s()}),o.command("changelog").alias("log").description("生成changelog").action(e=>{a()}),o.command("build").alias("b").description("构建代码").action(e=>{c()}),o.command("cdn").description("资源上传cdn").action(e=>{d()}),o.command("dev").option("-f, --fast","跳过 npm 安装，快速启动开发环境").alias("d").description("启动本地开发").action(e=>{l(e)}),o.command("lint").alias("l").description("代码检查").action(e=>{p()}),o.command("format").alias("fmt").description("代码格式化").action(e=>{u()}),o.command("extend <command>").alias("e").description("run an extend command").action(e=>{m.info(e)}),o.command("upgrade").alias("u").description("检查最新版本honey-cli").action(e=>{f()}),o.parse(process.argv)}}},function(e,t){e.exports=require("commander")},function(e,t,n){const{makeGithubUrlForTbTemplate:o,isValidName:r,rm:i,getFiles:s}=n(1),{gitClone:a}=n(11),{GitError:c}=n(12),l=n(13),{loadTemplates:u}=n(3),p=n(0),d=n(6),f=n(2),{renderInPlaceSync:m}=n(28);e.exports={newCmd:async function(e){try{const e=await u();if(!e)throw new Error("未找到模板");const t=await l.prompt([{type:"input",name:"projectName",message:"project name",validate:e=>e?!!r(e)||"invalid project name(only alphabet number _ - were allowed)":"project name should not be empty"},{type:"list",name:"template",message:"choose template",choices:()=>e.map(e=>({name:`${e.name} (${e.description}) - ${e.valid?"valid":"invalid"}`,value:e}))}]);if(!t.template.valid)throw new Error("invalid template: "+t.template.name);{const e=o(t.template.name);await a(e,t.projectName),await i(t.projectName+"/.git");(await s(t.projectName+"/**/*")).forEach(e=>{if(d.lstatSync(e).isFile()){p.info("正在写入"+e);const n=f.extname(e);/\.(txt|markdown|md|js|jsx|vue|html|json|less|css|scss|styl)$/i.test(n)&&m(e,{name:t.projectName})}})}}catch(e){e instanceof c?p.error(e.message):p.error(e)}}}},function(e,t){e.exports=require("chalk")},function(e,t){e.exports=require("rimraf")},function(e,t){e.exports=require("util")},function(e,t){e.exports=require("glob")},function(e,t,n){const o=n(27);e.exports={get:async function(e){const t=await o.get(e);return t&&200===t.status?t.text:""}}},function(e,t){e.exports=require("superagent")},function(e,t,n){const{readFile:o,writeFile:r}=n(1);e.exports={renderInPlaceSync:function(e,t){let n=o(e);Object.keys(t).forEach(e=>{n=n.replaceAll(new RegExp(`{{{${e}}}}`,"gi"),t[e])}),r(e,n)}}},function(e,t,n){const o=n(13),{getStatus:r,gitPush:i,getUnpushedCommits:s,gitAdd:a}=n(11),c=(n(2),n(30)),l=n(31).bootstrap,u=n(0),{formatCmd:p}=n(14),{getPathInLib:d}=n(5);e.exports={gitCommit:async function(){await p();const e=await r(),t=await s();if(t&&console.log(` (${t.split("\n").filter(e=>e).length} commits unpushed)`),Array.isArray(e)){const t=await o.prompt({type:"checkbox",name:"files",message:"请选择要提交的文件:",choices:e.map(e=>({name:e})),pageSize:20});if(t&&t.files&&t.files.length>0){const n=t.files.length===e.length?".":t.files.join(" ");return 0===(await a(n)).code&&await l({cliPath:d("./node_modules/commitizen"),config:{path:d("./3rd/cz-conventional-changelog")}},""),!0}}},gitPushCmd:async function(){if(await s()){(await o.prompt({type:"confirm",name:"pushCommits",message:"Do you want to push now?",default:!1})).pushCommits&&await i("-u")}},generateChangeLog:async function(){c({noVerify:!0,infile:"docs/CHANGELOG.md",silent:!0}).then(()=>{u.info("changelog 生成成功，位于docs/CHANGELOG.md文件中")}).catch(e=>{u.error("standard-version failed with message: "+e.message)})}}},function(e,t){e.exports=require("standard-version")},function(e,t){e.exports=require("commitizen/dist/cli/git-cz")},function(e,t){e.exports=require("prettier")},function(e,t,n){const{doCmd:o,rm:r,isValidLibName:i}=n(1),s=n(0),a=n(4),{generateWebpackConfig:c}=n(16),{generateWebpackLibConfig:l}=n(42),{loadHoneyConfig:u,translateHoneyConfigToVite:p}=n(3),d=n(8),{build:f}=n(7),{cdnCmd:m}=n(18);e.exports={buildCmd:async function(){try{await o("npm",["i","--save","core-js@3"]),await o("npm",["i","--save","regenerator-runtime"]),await o("npm",["i"])}catch(e){s.error(e)}const e=u();try{if(await r(e.dist),e.useVite){const t=p(e,"production");await f({...t,mode:"production",configFile:!1})}else{let t=null;if(e.isLib){if(!e.libName)return void s.error("请在package.json的honeyConfig里配置libName");if(!i(e.libName))return void s.error("libName必须遵循蛇形命名");e.umdName||(e.umdName=a.camelCase(e.libName)),t=l(e)}else t=c(e);await function(e){return new Promise((t,n)=>{d(e,(e,o)=>{e?n(e):(process.stdout.write(o.toString({colors:!0,modules:!1,children:!1,chunks:!1,chunkModules:!1})+"\n\n"),o.hasErrors()&&(s.error("  Build failed with errors.\n"),process.exit(1)),s.info("  Build complete.\n"),t())})})}(t)}e.cdn&&await m()}catch(e){s.error(e)}}}},function(e,t){e.exports=require("html-webpack-plugin")},function(e,t){e.exports=require("copy-webpack-plugin")},function(e,t){e.exports={urlToRelatedDir:function(e){return"/"!==e.slice(-1)&&(e+="/"),"/"===e[0]&&(e=e.slice(1)),"./"+e},fixUrlSuffix:function(e){let t=e;return"/"!==t.slice(-1)&&(t+="/"),t}}},function(e,t){e.exports=require("vue-loader")},function(e,t){e.exports=require("progress-bar-webpack-plugin")},function(e,t){e.exports=require("eslint-webpack-plugin")},function(e,t){e.exports={vueConfig:{env:{browser:!0},parser:"vue-eslint-parser",parserOptions:{parser:"babel-eslint",ecmaVersion:2018,sourceType:"module"},extends:["plugin:vue/essential","eslint-config-tencent","eslint-config-tencent/prettier"],plugins:["vue"]},vue3Config:{env:{browser:!0,"vue/setup-compiler-macros":!0},parser:"vue-eslint-parser",parserOptions:{parser:"babel-eslint",ecmaVersion:2018,sourceType:"module"},extends:["plugin:vue/vue3-essential","eslint-config-tencent","eslint-config-tencent/prettier"],plugins:["vue"]},reactConfig:{env:{browser:!0},parser:"babel-eslint",parserOptions:{ecmaFeatures:{jsx:!0,generators:!0,experimentalObjectRestSpread:!0},ecmaVersion:2018,sourceType:"module"},extends:["plugin:react/recommended","eslint-config-tencent","eslint-config-tencent/prettier"],plugins:["react"]}}},function(e,t,n){"use strict";n.r(t),n.d(t,"browserslistrc",(function(){return o}));const o="> 0.25%, not dead"},function(e,t,n){const{generateBasicWebpackConfig:o}=n(17);e.exports={generateWebpackLibConfig:function(e){const t=o(e,"production");return t.output={path:e.dist,filename:e.libName+".min.js",library:e.umdName,libraryTarget:"umd",jsonpFunction:e.jsonpFunction?e.jsonpFunction:null},t}}},function(e,t,n){const o=n(44),r=n(0),i=n(6);e.exports={CdnUploader:class{constructor(){}init(){return process.env.cdnId&&process.env.cdnKey?(this.cos=new o({SecretId:process.env.cdnId,SecretKey:process.env.cdnKey}),!0):(r.error("请在环境变量中设置cdnId及cdnKey"),this.cos=null,!1)}uploadFile(e,t){return new Promise((n,o)=>{this.cos.putObject({Bucket:"static-1258919571",Region:"ap-guangzhou",Key:"honeyfed/"+e,Body:i.readFileSync(t)},(function(e,t){e?(r.error(e),o(e)):n(t)}))})}}}},function(e,t){e.exports=require("cos-nodejs-sdk-v5")},function(e,t,n){const{doCmd:o,rm:r,writeFile:i}=n(1),s=n(0),{getEslintConfig:a}=n(9),{getPrettierrc:c}=n(15),l=n(2),{generateWebpackConfig:u}=n(16),{loadHoneyConfig:p,translateHoneyConfigToVite:d}=n(3),f=n(8),m=n(46),{createServer:g}=n(7),h=n(47),v=n(4);function w(e){return new Promise(t=>{try{const n=u(e,"development"),o=new m(f(n),n.devServer);o.listen(e.dev.port,"0.0.0.0",()=>{s.info("Starting server on http://localhost:"+e.dev.port),t(o)})}catch(e){s.error("server"+e),t(null)}})}e.exports={devCmd:async function(e){const t=p(),{useVite:n,isReact:u,isVue3:f}=t;if(!e.fast)try{await o("npm",["i","--save","core-js@3"]),await o("npm",["i","--save","regenerator-runtime"]),await o("npm",["i","--save-dev","--force","eslint","prettier",f?"eslint-plugin-vue@^8":"eslint-plugin-vue@^6","eslint-plugin-react","eslint-plugin-prettier@^3","eslint-config-tencent"]),await o("npm",["i"]),n&&(u?await o("npm",["i","@vitejs/plugin-react"]):f?await o("npm",["i","@vitejs/plugin-vue","@vitejs/plugin-vue-jsx"]):await o("npm",["i","vite-plugin-vue2"])),await r(l.resolve(process.cwd(),".eslintrc.js")),await r(l.resolve(process.cwd(),".eslintrc")),await r(l.resolve(process.cwd(),".eslintrc.json")),await r(l.resolve(process.cwd(),".eslint.honey.js")),await r(l.resolve(process.cwd(),".prettierrc"))}catch(e){s.error(e)}s.info("begin dev server");try{i(l.resolve(process.cwd(),".eslintrc"),JSON.stringify(a(u?"react":f?"vue3":"vue"))),i(l.resolve(process.cwd(),".prettierrc"),JSON.stringify(c()))}catch(e){s.error(e)}let m;if(n){const e=d(t,"development");m=await g({...e,mode:"development",configFile:!1}),await m.listen(),m.printUrls()}else m=await w(t);if(t.dev&&t.dev.mock){const e=l.resolve(process.cwd(),t.dev.mock);h.watch(e).on("change",v.throttle(()=>{if(n)m&&m.restart();else{const e=m;m=null,e&&e.close(async()=>{m=await w(t)})}},2e3,{leading:!0,trailing:!1}))}}}},function(e,t){e.exports=require("webpack-dev-server")},function(e,t){e.exports=require("chokidar")},function(e,t,n){const{ESLint:o}=n(49),{getEsLintOptions:r}=n(9),{loadHoneyConfig:i}=n(3);e.exports={lintCmd:async function(){const e=i(),t=new o(r()),n=await t.lintFiles([e.src+"/**/*.vue",e.src+"/**/*.js",e.src+"/**/*.jsx"]);await o.outputFixes(n);const s=(await t.loadFormatter("stylish")).format(n);console.log(s)}}},function(e,t){e.exports=require("eslint")},function(e,t,n){const o=n(0),{doCmd:r,loadJson:i}=n(1),{getPathInLib:s}=n(5),a=n(51);e.exports={upgradeCmd:async function(){o.info("正在检查更新...");const e=i(s("./package.json")),t=await r("npm",["view",e.name,"version"],{}),n=Buffer.from(t.data).toString().trim(),c=e.version,l=a(n,c);if(0===l)o.info("当前是最新版本哦，亲~");else if(1===l){o.info("发现新版本: "+n),o.info("尝试升级中...");0===(await r("npm",["i","-g",e.name])).code?o.info("安装成功"):(o.error("安装失败"),o.info("请用管理员权限尝试该命令: npm install --global "+e.name))}else o.info("年轻人不讲武德哦~")}}},function(e,t){e.exports=require("compare-versions")}]);